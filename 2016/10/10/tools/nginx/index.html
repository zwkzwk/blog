<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
      
    
    
      
    
  <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css">























<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/blog/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Muse',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Nginx æç®€æ•™ç¨‹  æœ¬æ–‡æ˜¯ä¸€ä¸ª Nginx æç®€æ•™ç¨‹ï¼Œç›®çš„åœ¨äºå¸®åŠ©æ–°æ‰‹å¿«é€Ÿå…¥é—¨ Nginxã€‚ æˆ‘åœ¨ Github ä¸Šåˆ›å»ºäº†ä¸€ä¸ª Nginx æ•™ç¨‹é¡¹ç›®ï¼š nginx-tutorialã€‚æ•™ç¨‹ä¸­æä¾›äº†ä¸€äº›å¸¸ç”¨åœºæ™¯çš„ Nginx ç¤ºä¾‹ï¼Œç¤ºä¾‹å¯ä»¥é€šè¿‡è„šæœ¬ä¸€é”®å¼å¯åŠ¨ï¼Œæ–¹ä¾¿æ–°æ‰‹å­¦ä¹ ã€‚ ğŸ““ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œblogã€    æ¦‚è¿° å®‰è£…  Windows å®‰è£… Linux å®‰è£… Linux å¼€æœºè‡ªå¯åŠ¨">
<meta name="keywords" content="web,load balance,proxy,nginx">
<meta property="og:type" content="article">
<meta property="og:title" content="Nginx æç®€æ•™ç¨‹">
<meta property="og:url" content="https://dunwu.github.io/2016/10/10/tools/nginx/index.html">
<meta property="og:site_name" content="é™é»˜è™šç©ºçš„åšå®¢">
<meta property="og:description" content="Nginx æç®€æ•™ç¨‹  æœ¬æ–‡æ˜¯ä¸€ä¸ª Nginx æç®€æ•™ç¨‹ï¼Œç›®çš„åœ¨äºå¸®åŠ©æ–°æ‰‹å¿«é€Ÿå…¥é—¨ Nginxã€‚ æˆ‘åœ¨ Github ä¸Šåˆ›å»ºäº†ä¸€ä¸ª Nginx æ•™ç¨‹é¡¹ç›®ï¼š nginx-tutorialã€‚æ•™ç¨‹ä¸­æä¾›äº†ä¸€äº›å¸¸ç”¨åœºæ™¯çš„ Nginx ç¤ºä¾‹ï¼Œç¤ºä¾‹å¯ä»¥é€šè¿‡è„šæœ¬ä¸€é”®å¼å¯åŠ¨ï¼Œæ–¹ä¾¿æ–°æ‰‹å­¦ä¹ ã€‚ ğŸ““ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œblogã€    æ¦‚è¿° å®‰è£…  Windows å®‰è£… Linux å®‰è£… Linux å¼€æœºè‡ªå¯åŠ¨">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://raw.githubusercontent.com/dunwu/images/master/images/web/nginx/nginx.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/dunwu/images/master/images/web/reverse-proxy.png">
<meta property="og:updated_time" content="2019-03-19T13:31:34.484Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nginx æç®€æ•™ç¨‹">
<meta name="twitter:description" content="Nginx æç®€æ•™ç¨‹  æœ¬æ–‡æ˜¯ä¸€ä¸ª Nginx æç®€æ•™ç¨‹ï¼Œç›®çš„åœ¨äºå¸®åŠ©æ–°æ‰‹å¿«é€Ÿå…¥é—¨ Nginxã€‚ æˆ‘åœ¨ Github ä¸Šåˆ›å»ºäº†ä¸€ä¸ª Nginx æ•™ç¨‹é¡¹ç›®ï¼š nginx-tutorialã€‚æ•™ç¨‹ä¸­æä¾›äº†ä¸€äº›å¸¸ç”¨åœºæ™¯çš„ Nginx ç¤ºä¾‹ï¼Œç¤ºä¾‹å¯ä»¥é€šè¿‡è„šæœ¬ä¸€é”®å¼å¯åŠ¨ï¼Œæ–¹ä¾¿æ–°æ‰‹å­¦ä¹ ã€‚ ğŸ““ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œblogã€    æ¦‚è¿° å®‰è£…  Windows å®‰è£… Linux å®‰è£… Linux å¼€æœºè‡ªå¯åŠ¨">
<meta name="twitter:image" content="https://raw.githubusercontent.com/dunwu/images/master/images/web/nginx/nginx.jpg">



  <link rel="alternate" href="/blog/atom.xml" title="é™é»˜è™šç©ºçš„åšå®¢" type="application/atom+xml">




  <link rel="canonical" href="https://dunwu.github.io/2016/10/10/tools/nginx/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Nginx æç®€æ•™ç¨‹ | é™é»˜è™šç©ºçš„åšå®¢</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">é™é»˜è™šç©ºçš„åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">å¤§é“è‡³ç®€ï¼ŒçŸ¥æ˜“è¡Œéš¾</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/blog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/blog/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>å…³äº</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/blog/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/blog/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/blog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    
  
  
  
  

  

  <a href="https://github.com/dunwu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill: #222; color: #fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/2016/10/10/tools/nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™é»˜è™šç©ºçš„åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Nginx æç®€æ•™ç¨‹<a href="https://github.com/dunwu/blog/blob/master/source/_posts/tools/nginx.md" class="post-edit-link" title="ç¼–è¾‘" rel="noopener" target="_blank"><i class="fa fa-pencil"></i></a>

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2016-10-10 11:45:00" itemprop="dateCreated datePublished" datetime="2016-10-10T11:45:00+08:00">2016-10-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-03-19 21:31:34" itemprop="dateModified" datetime="2019-03-19T21:31:34+08:00">2019-03-19</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
                
                <span title="æœ¬æ–‡å­—æ•°">13k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">12 åˆ†é’Ÿ</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="nginx-æç®€æ•™ç¨‹"><a class="markdownIt-Anchor" href="#nginx-æç®€æ•™ç¨‹"></a> Nginx æç®€æ•™ç¨‹</h1>
<blockquote>
<p>æœ¬æ–‡æ˜¯ä¸€ä¸ª Nginx æç®€æ•™ç¨‹ï¼Œç›®çš„åœ¨äºå¸®åŠ©æ–°æ‰‹å¿«é€Ÿå…¥é—¨ Nginxã€‚</p>
<p>æˆ‘åœ¨ Github ä¸Šåˆ›å»ºäº†ä¸€ä¸ª Nginx æ•™ç¨‹é¡¹ç›®ï¼š <a href="https://github.com/dunwu/nginx-tutorial" target="_blank" rel="noopener"><strong>nginx-tutorial</strong></a>ã€‚æ•™ç¨‹ä¸­æä¾›äº†ä¸€äº›å¸¸ç”¨åœºæ™¯çš„ Nginx ç¤ºä¾‹ï¼Œç¤ºä¾‹å¯ä»¥é€šè¿‡è„šæœ¬ä¸€é”®å¼å¯åŠ¨ï¼Œæ–¹ä¾¿æ–°æ‰‹å­¦ä¹ ã€‚</p>
<p>ğŸ““ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œ<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener">blog</a>ã€</p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:3 -->
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0">æ¦‚è¿°</a></li>
<li><a href="#%E5%AE%89%E8%A3%85">å®‰è£…</a>
<ul>
<li><a href="#windows-%E5%AE%89%E8%A3%85">Windows å®‰è£…</a></li>
<li><a href="#linux-%E5%AE%89%E8%A3%85">Linux å®‰è£…</a></li>
<li><a href="#linux-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8">Linux å¼€æœºè‡ªå¯åŠ¨</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8">ä½¿ç”¨</a></li>
<li><a href="#nginx-%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98">nginx é…ç½®å®æˆ˜</a>
<ul>
<li><a href="#http-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE">http åå‘ä»£ç†é…ç½®</a></li>
<li><a href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E9%85%8D%E7%BD%AE">è´Ÿè½½å‡è¡¡é…ç½®</a></li>
<li><a href="#%E7%BD%91%E7%AB%99%E6%9C%89%E5%A4%9A%E4%B8%AA-webapp-%E7%9A%84%E9%85%8D%E7%BD%AE">ç½‘ç«™æœ‰å¤šä¸ª webapp çš„é…ç½®</a></li>
<li><a href="#https-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE">https åå‘ä»£ç†é…ç½®</a></li>
<li><a href="#%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9%E9%85%8D%E7%BD%AE">é™æ€ç«™ç‚¹é…ç½®</a></li>
<li><a href="#%E6%90%AD%E5%BB%BA%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8">æ­å»ºæ–‡ä»¶æœåŠ¡å™¨</a></li>
<li><a href="#%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">è·¨åŸŸè§£å†³æ–¹æ¡ˆ</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
</ul>
<!-- /TOC -->
<h2 id="æ¦‚è¿°"><a class="markdownIt-Anchor" href="#æ¦‚è¿°"></a> æ¦‚è¿°</h2>
<p><strong>ä»€ä¹ˆæ˜¯ Nginx?</strong></p>
<p><strong>Nginx (engine x)</strong> æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ Web æœåŠ¡å™¨ ã€åå‘ä»£ç†æœåŠ¡å™¨åŠç”µå­é‚®ä»¶ï¼ˆIMAP/POP3ï¼‰ä»£ç†æœåŠ¡å™¨ã€‚</p>
<p><br><div align="center"><img src="https://raw.githubusercontent.com/dunwu/images/master/images/web/nginx/nginx.jpg"></div><br></p>
<p><strong>ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿ</strong></p>
<p>åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å— internet ä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™ internet ä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚</p>
<p><br><div align="center"><img src="https://raw.githubusercontent.com/dunwu/images/master/images/web/reverse-proxy.png"></div><br></p>
<h2 id="å®‰è£…"><a class="markdownIt-Anchor" href="#å®‰è£…"></a> å®‰è£…</h2>
<h3 id="windows-å®‰è£…"><a class="markdownIt-Anchor" href="#windows-å®‰è£…"></a> Windows å®‰è£…</h3>
<p>ï¼ˆ1ï¼‰è¿›å…¥<a href="https://nginx.org/en/download.html" target="_blank" rel="noopener">å®˜æ–¹ä¸‹è½½åœ°å€</a>ï¼Œé€‰æ‹©åˆé€‚ç‰ˆæœ¬ï¼ˆnginx/Windows-xxxï¼‰ã€‚</p>
<p>ï¼ˆ2ï¼‰è§£å‹åˆ°æœ¬åœ°</p>
<p>ï¼ˆ3ï¼‰å¯åŠ¨</p>
<p>ä¸‹é¢ä»¥ C ç›˜æ ¹ç›®å½•ä¸ºä¾‹è¯´æ˜ä¸‹ï¼š</p>
<figure class="highlight dos"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:</span><br><span class="line"><span class="built_in">cd</span> C:\nginx-<span class="number">0</span>.<span class="number">8</span>.<span class="number">54</span> <span class="built_in">start</span> nginx</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨ï¼šNginx / Win32 æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªæ§åˆ¶å°ç¨‹åºï¼Œè€Œé windows æœåŠ¡æ–¹å¼çš„ã€‚æœåŠ¡å™¨æ–¹å¼ç›®å‰è¿˜æ˜¯å¼€å‘å°è¯•ä¸­ã€‚</p>
</blockquote>
<h3 id="linux-å®‰è£…"><a class="markdownIt-Anchor" href="#linux-å®‰è£…"></a> Linux å®‰è£…</h3>
<h4 id="rpm-åŒ…æ–¹å¼æ¨è"><a class="markdownIt-Anchor" href="#rpm-åŒ…æ–¹å¼æ¨è"></a> rpm åŒ…æ–¹å¼ï¼ˆæ¨èï¼‰</h4>
<p>ï¼ˆ1ï¼‰è¿›å…¥<a href="http://nginx.org/packages/" target="_blank" rel="noopener">ä¸‹è½½é¡µé¢</a>ï¼Œé€‰æ‹©åˆé€‚ç‰ˆæœ¬ä¸‹è½½ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ wget http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å®‰è£… nginx rpm åŒ…</p>
<p>nginx rpm åŒ…å®é™…ä¸Šå®‰è£…çš„æ˜¯ nginx çš„ yum æºã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ rpm -ivh nginx-*.rpm</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰æ­£å¼å®‰è£… rpm åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yum install nginx</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰å…³é—­é˜²ç«å¢™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line">$ firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h4 id="æºç ç¼–è¯‘æ–¹å¼"><a class="markdownIt-Anchor" href="#æºç ç¼–è¯‘æ–¹å¼"></a> æºç ç¼–è¯‘æ–¹å¼</h4>
<h5 id="å®‰è£…ç¼–è¯‘å·¥å…·åŠåº“æ–‡ä»¶"><a class="markdownIt-Anchor" href="#å®‰è£…ç¼–è¯‘å·¥å…·åŠåº“æ–‡ä»¶"></a> å®‰è£…ç¼–è¯‘å·¥å…·åŠåº“æ–‡ä»¶</h5>
<p>Nginx æºç çš„ç¼–è¯‘ä¾èµ–äº gcc ä»¥åŠä¸€äº›åº“æ–‡ä»¶ï¼Œæ‰€ä»¥å¿…é¡»æå‰å®‰è£…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel</span><br></pre></td></tr></table></figure>
<p>Nginx ä¾èµ– pcre åº“ï¼Œå®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰ä¸‹è½½è§£å‹åˆ°æœ¬åœ°</p>
<p>è¿›å…¥<a href="https://sourceforge.net/projects/pcre/files/pcre/" target="_blank" rel="noopener">pcre å®˜ç½‘ä¸‹è½½é¡µé¢</a>ï¼Œé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ã€‚</p>
<p>æˆ‘é€‰æ‹©çš„æ˜¯ 8.35 ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -O /opt/pcre/pcre-8.35.tar.gz http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz</span><br><span class="line"><span class="built_in">cd</span> /opt/pcre</span><br><span class="line">tar zxvf pcre-8.35.tar.gz</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰ç¼–è¯‘å®‰è£…</p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/pcre/pcre-8.35</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸ</p>
<p>æ‰§è¡Œ <code>pcre-config --version</code> å‘½ä»¤ã€‚</p>
<h5 id="å®‰è£…-nginx"><a class="markdownIt-Anchor" href="#å®‰è£…-nginx"></a> å®‰è£… Nginx</h5>
<p>å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰ä¸‹è½½è§£å‹åˆ°æœ¬åœ°</p>
<p>è¿›å…¥å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">http://nginx.org/en/download.html</a> ï¼Œé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ã€‚</p>
<p>æˆ‘é€‰æ‹©çš„æ˜¯ 1.12.2 ç‰ˆæœ¬ï¼š<a href="http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz" target="_blank" rel="noopener">http://downloads.sourceforge.net/project/pcre/pcre/8.35/pcre-8.35.tar.gz</a></p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">wget -O /opt/nginx/nginx-<span class="number">1.12</span>.<span class="number">2</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> http:<span class="comment">//nginx.org/download/nginx-1.12.2.tar.gz</span></span><br><span class="line">cd /opt/nginx</span><br><span class="line">tar zxvf nginx-<span class="number">1.12</span>.<span class="number">2</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰ç¼–è¯‘å®‰è£…</p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/opt/nginx/nginx-1.12.2</span></span><br><span class="line"><span class="string">./configure</span> <span class="params">--with-http_stub_status_module</span> <span class="params">--with-http_ssl_module</span> <span class="params">--with-pcre=/opt/pcre/pcre-8</span>.35</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰å…³é—­é˜²ç«å¢™</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line">$ firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰ å¯åŠ¨ Nginx</p>
<p>å®‰è£…æˆåŠŸåï¼Œç›´æ¥æ‰§è¡Œ <code>nginx</code> å‘½ä»¤å³å¯å¯åŠ¨ nginxã€‚</p>
<h3 id="linux-å¼€æœºè‡ªå¯åŠ¨"><a class="markdownIt-Anchor" href="#linux-å¼€æœºè‡ªå¯åŠ¨"></a> Linux å¼€æœºè‡ªå¯åŠ¨</h3>
<p>Centos7 ä»¥ä¸Šæ˜¯ç”¨ Systemd è¿›è¡Œç³»ç»Ÿåˆå§‹åŒ–çš„ï¼ŒSystemd æ˜¯ Linux ç³»ç»Ÿä¸­æœ€æ–°çš„åˆå§‹åŒ–ç³»ç»Ÿï¼ˆinitï¼‰ï¼Œå®ƒä¸»è¦çš„è®¾è®¡ç›®æ ‡æ˜¯å…‹æœ sysvinit å›ºæœ‰çš„ç¼ºç‚¹ï¼Œæé«˜ç³»ç»Ÿçš„å¯åŠ¨é€Ÿåº¦ã€‚Systemd æœåŠ¡æ–‡ä»¶ä»¥ .service ç»“å°¾ã€‚</p>
<h4 id="rpm-åŒ…æ–¹å¼"><a class="markdownIt-Anchor" href="#rpm-åŒ…æ–¹å¼"></a> rpm åŒ…æ–¹å¼</h4>
<p>å¦‚æœæ˜¯é€šè¿‡ rpm åŒ…å®‰è£…çš„ï¼Œä¼šè‡ªåŠ¨åˆ›å»º nginx.service æ–‡ä»¶ã€‚</p>
<p>ç›´æ¥ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ systemctl <span class="built_in">enable</span> nginx.service</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®å¼€æœºå¯åŠ¨å³å¯ã€‚</p>
<h4 id="æºç ç¼–è¯‘æ–¹å¼-2"><a class="markdownIt-Anchor" href="#æºç ç¼–è¯‘æ–¹å¼-2"></a> æºç ç¼–è¯‘æ–¹å¼</h4>
<p>å¦‚æœé‡‡ç”¨æºç ç¼–è¯‘æ–¹å¼ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»º nginx.service æ–‡ä»¶ã€‚</p>
<h2 id="ä½¿ç”¨"><a class="markdownIt-Anchor" href="#ä½¿ç”¨"></a> ä½¿ç”¨</h2>
<p>nginx çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å‡ æ¡å‘½ä»¤ã€‚</p>
<p>å¸¸ç”¨åˆ°çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">nginx -s stop       å¿«é€Ÿå…³é—­Nginxï¼Œå¯èƒ½ä¸ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œå¹¶è¿…é€Ÿç»ˆæ­¢webæœåŠ¡ã€‚</span><br><span class="line">nginx -s quit       å¹³ç¨³å…³é—­Nginxï¼Œä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œæœ‰å®‰æ’çš„ç»“æŸwebæœåŠ¡ã€‚</span><br><span class="line">nginx -s reload     å› æ”¹å˜äº†Nginxç›¸å…³é…ç½®ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®è€Œé‡è½½ã€‚</span><br><span class="line">nginx -s reopen     é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ã€‚</span><br><span class="line">nginx -c filename   ä¸º Nginx æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¥ä»£æ›¿ç¼ºçœçš„ã€‚</span><br><span class="line">nginx -t            ä¸è¿è¡Œï¼Œè€Œä»…ä»…æµ‹è¯•é…ç½®æ–‡ä»¶ã€‚nginx å°†æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œå¹¶å°è¯•æ‰“å¼€é…ç½®æ–‡ä»¶ä¸­æ‰€å¼•ç”¨åˆ°çš„æ–‡ä»¶ã€‚</span><br><span class="line">nginx -v            æ˜¾ç¤º nginx çš„ç‰ˆæœ¬ã€‚</span><br><span class="line">nginx -V            æ˜¾ç¤º nginx çš„ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å’Œé…ç½®å‚æ•°ã€‚</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½æ•²å‘½ä»¤ï¼Œå¯ä»¥åœ¨ nginx å®‰è£…ç›®å½•ä¸‹æ–°æ·»ä¸€ä¸ªå¯åŠ¨æ‰¹å¤„ç†æ–‡ä»¶<strong>startup.bat</strong>ï¼ŒåŒå‡»å³å¯è¿è¡Œã€‚å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">rem å¦‚æœå¯åŠ¨å‰å·²ç»å¯åŠ¨nginxå¹¶è®°å½•ä¸‹pidæ–‡ä»¶ï¼Œä¼š<span class="built_in">kill</span>æŒ‡å®šè¿›ç¨‹</span><br><span class="line">nginx.exe -s stop</span><br><span class="line"></span><br><span class="line">rem æµ‹è¯•é…ç½®æ–‡ä»¶è¯­æ³•æ­£ç¡®æ€§</span><br><span class="line">nginx.exe -t -c conf/nginx.conf</span><br><span class="line"></span><br><span class="line">rem æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">nginx.exe -v</span><br><span class="line"></span><br><span class="line">rem æŒ‰ç…§æŒ‡å®šé…ç½®å»å¯åŠ¨nginx</span><br><span class="line">nginx.exe -c conf/nginx.conf</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯è¿è¡Œåœ¨ Linux ä¸‹ï¼Œå†™ä¸€ä¸ª shell è„šæœ¬ï¼Œå¤§åŒå°å¼‚ã€‚</p>
<h2 id="nginx-é…ç½®å®æˆ˜"><a class="markdownIt-Anchor" href="#nginx-é…ç½®å®æˆ˜"></a> nginx é…ç½®å®æˆ˜</h2>
<p>æˆ‘å§‹ç»ˆè®¤ä¸ºï¼Œå„ç§å¼€å‘å·¥å…·çš„é…ç½®è¿˜æ˜¯ç»“åˆå®æˆ˜æ¥è®²è¿°ï¼Œä¼šè®©äººæ›´æ˜“ç†è§£ã€‚</p>
<h3 id="http-åå‘ä»£ç†é…ç½®"><a class="markdownIt-Anchor" href="#http-åå‘ä»£ç†é…ç½®"></a> http åå‘ä»£ç†é…ç½®</h3>
<p>æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸ªå°ç›®æ ‡ï¼šä¸è€ƒè™‘å¤æ‚çš„é…ç½®ï¼Œä»…ä»…æ˜¯å®Œæˆä¸€ä¸ª http åå‘ä»£ç†ã€‚</p>
<p>nginx.conf é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š<br>
<strong><em>æ³¨ï¼šconf / nginx.conf æ˜¯ nginx çš„é»˜è®¤é…ç½®æ–‡ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ nginx -c æŒ‡å®šä½ çš„é…ç½®æ–‡ä»¶</em></strong></p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¿è¡Œç”¨æˆ·</span></span><br><span class="line"><span class="comment">#user somebody;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨è¿›ç¨‹,é€šå¸¸è®¾ç½®æˆå’Œcpuçš„æ•°é‡ç›¸ç­‰</span></span><br><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…¨å±€é”™è¯¯æ—¥å¿—</span></span><br><span class="line"><span class="attribute">error_log</span>  D:/Tools/nginx-<span class="number">1</span>.<span class="number">10</span>.<span class="number">1</span>/logs/error.log;</span><br><span class="line"><span class="attribute">error_log</span>  D:/Tools/nginx-<span class="number">1</span>.<span class="number">10</span>.<span class="number">1</span>/logs/notice.log  <span class="literal">notice</span>;</span><br><span class="line"><span class="attribute">error_log</span>  D:/Tools/nginx-<span class="number">1</span>.<span class="number">10</span>.<span class="number">1</span>/logs/info.log  <span class="literal">info</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#PIDæ–‡ä»¶ï¼Œè®°å½•å½“å‰å¯åŠ¨çš„nginxçš„è¿›ç¨‹ID</span></span><br><span class="line"><span class="attribute">pid</span>        D:/Tools/nginx-<span class="number">1</span>.<span class="number">10</span>.<span class="number">1</span>/logs/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å·¥ä½œæ¨¡å¼åŠè¿æ¥æ•°ä¸Šé™</span></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">1024</span>;    <span class="comment">#å•ä¸ªåå°worker processè¿›ç¨‹çš„æœ€å¤§å¹¶å‘é“¾æ¥æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾å®šhttpæœåŠ¡å™¨ï¼Œåˆ©ç”¨å®ƒçš„åå‘ä»£ç†åŠŸèƒ½æä¾›è´Ÿè½½å‡è¡¡æ”¯æŒ</span></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="comment">#è®¾å®šmimeç±»å‹(é‚®ä»¶æ”¯æŒç±»å‹),ç±»å‹ç”±mime.typesæ–‡ä»¶å®šä¹‰</span></span><br><span class="line">    <span class="attribute">include</span>       D:/Tools/nginx-<span class="number">1</span>.<span class="number">10</span>.<span class="number">1</span>/conf/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#è®¾å®šæ—¥å¿—</span></span><br><span class="line">	<span class="attribute">log_format</span>  main  <span class="string">'[<span class="variable">$remote_addr</span>] - [<span class="variable">$remote_user</span>] [<span class="variable">$time_local</span>] "<span class="variable">$request</span>" '</span></span><br><span class="line">                      <span class="string">'<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> "<span class="variable">$http_referer</span>" '</span></span><br><span class="line">                      <span class="string">'"<span class="variable">$http_user_agent</span>" "<span class="variable">$http_x_forwarded_for</span>"'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>    D:/Tools/nginx-<span class="number">1</span>.<span class="number">10</span>.<span class="number">1</span>/logs/access.log main;</span><br><span class="line">    <span class="attribute">rewrite_log</span>     <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#sendfile æŒ‡ä»¤æŒ‡å®š nginx æ˜¯å¦è°ƒç”¨ sendfile å‡½æ•°ï¼ˆzero copy æ–¹å¼ï¼‰æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨ï¼Œ</span></span><br><span class="line">    <span class="comment">#å¿…é¡»è®¾ä¸º on,å¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸º offï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿçš„uptime.</span></span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#è¿æ¥è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">120</span>;</span><br><span class="line">    <span class="attribute">tcp_nodelay</span>        <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">#gzipå‹ç¼©å¼€å…³</span></span><br><span class="line">	<span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#è®¾å®šå®é™…çš„æœåŠ¡å™¨åˆ—è¡¨</span></span><br><span class="line">    <span class="attribute">upstream</span> zp_server1&#123;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">127.0.0.1:8089</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#HTTPæœåŠ¡å™¨</span></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="comment">#ç›‘å¬80ç«¯å£ï¼Œ80ç«¯å£æ˜¯çŸ¥åç«¯å£å·ï¼Œç”¨äºHTTPåè®®</span></span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#å®šä¹‰ä½¿ç”¨www.xx.comè®¿é—®</span></span><br><span class="line">        <span class="attribute">server_name</span>  www.helloworld.com;</span><br><span class="line"></span><br><span class="line">		<span class="comment">#é¦–é¡µ</span></span><br><span class="line">		<span class="attribute">index</span> index.html</span><br><span class="line"></span><br><span class="line">		<span class="comment">#æŒ‡å‘webappçš„ç›®å½•</span></span><br><span class="line">		root D:\01_Workspace\Project\github\zp\SpringNotes\spring-security\spring-shiro\src\main\webapp;</span><br><span class="line"></span><br><span class="line">		<span class="comment">#ç¼–ç æ ¼å¼</span></span><br><span class="line">		<span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">#ä»£ç†é…ç½®å‚æ•°</span></span><br><span class="line">        <span class="attribute">proxy_connect_timeout</span> <span class="number">180</span>;</span><br><span class="line">        <span class="attribute">proxy_send_timeout</span> <span class="number">180</span>;</span><br><span class="line">        <span class="attribute">proxy_read_timeout</span> <span class="number">180</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarder-For <span class="variable">$remote_addr</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#åå‘ä»£ç†çš„è·¯å¾„ï¼ˆå’Œupstreamç»‘å®šï¼‰ï¼Œlocation åé¢è®¾ç½®æ˜ å°„çš„è·¯å¾„</span></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://zp_server1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#é™æ€æ–‡ä»¶ï¼Œnginxè‡ªå·±å¤„ç†</span></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~ ^/(images|javascript|js|css|flash|media|static)/</span> &#123;</span><br><span class="line">            <span class="attribute">root</span> D:\01_Workspace\Project\github\zp\SpringNotes\spring-security\spring-shiro\src\main\webapp\views;</span><br><span class="line">            <span class="comment">#è¿‡æœŸ30å¤©ï¼Œé™æ€æ–‡ä»¶ä¸æ€ä¹ˆæ›´æ–°ï¼Œè¿‡æœŸå¯ä»¥è®¾å¤§ä¸€ç‚¹ï¼Œå¦‚æœé¢‘ç¹æ›´æ–°ï¼Œåˆ™å¯ä»¥è®¾ç½®å¾—å°ä¸€ç‚¹ã€‚</span></span><br><span class="line">            <span class="attribute">expires</span> <span class="number">30d</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#è®¾å®šæŸ¥çœ‹NginxçŠ¶æ€çš„åœ°å€</span></span><br><span class="line">        <span class="attribute">location</span> /NginxStatus &#123;</span><br><span class="line">            <span class="attribute">stub_status</span>           <span class="literal">on</span>;</span><br><span class="line">            <span class="attribute">access_log</span>            <span class="literal">on</span>;</span><br><span class="line">            <span class="attribute">auth_basic</span>            <span class="string">"NginxStatus"</span>;</span><br><span class="line">            <span class="attribute">auth_basic_user_file</span>  conf/htpasswd;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#ç¦æ­¢è®¿é—® .htxxx æ–‡ä»¶</span></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~ /\.ht</span> &#123;</span><br><span class="line">            <span class="attribute">deny</span> all;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">#é”™è¯¯å¤„ç†é¡µé¢ï¼ˆå¯é€‰æ‹©æ€§é…ç½®ï¼‰</span></span><br><span class="line">		<span class="comment">#error_page   404              /404.html;</span></span><br><span class="line">		<span class="comment">#error_page   500 502 503 504  /50x.html;</span></span><br><span class="line">        <span class="comment">#location = /50x.html &#123;</span></span><br><span class="line">        <span class="comment">#    root   html;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œè®©æˆ‘ä»¬æ¥è¯•è¯•å§ï¼š</p>
<ol>
<li>å¯åŠ¨ webappï¼Œæ³¨æ„å¯åŠ¨ç»‘å®šçš„ç«¯å£è¦å’Œ nginx ä¸­çš„ <code>upstream</code> è®¾ç½®çš„ç«¯å£ä¿æŒä¸€è‡´ã€‚</li>
<li>æ›´æ”¹ hostï¼šåœ¨ C:\Windows\System32\drivers\etc ç›®å½•ä¸‹çš„ host æ–‡ä»¶ä¸­æ·»åŠ ä¸€æ¡ DNS è®°å½•</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span> <span class="selector-tag">www</span><span class="selector-class">.helloworld</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>å¯åŠ¨å‰æ–‡ä¸­ startup.bat çš„å‘½ä»¤</li>
<li>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://www.helloworld.com" target="_blank" rel="noopener">www.helloworld.com</a>ï¼Œä¸å‡ºæ„å¤–ï¼Œå·²ç»å¯ä»¥è®¿é—®äº†ã€‚</li>
</ol>
<h3 id="è´Ÿè½½å‡è¡¡é…ç½®"><a class="markdownIt-Anchor" href="#è´Ÿè½½å‡è¡¡é…ç½®"></a> è´Ÿè½½å‡è¡¡é…ç½®</h3>
<p>ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼Œä»£ç†ä»…ä»…æŒ‡å‘ä¸€ä¸ªæœåŠ¡å™¨ã€‚</p>
<p>ä½†æ˜¯ï¼Œç½‘ç«™åœ¨å®é™…è¿è¥è¿‡ç¨‹ä¸­ï¼Œå¤šåŠéƒ½æ˜¯æœ‰å¤šå°æœåŠ¡å™¨è¿è¡Œç€åŒæ ·çš„ appï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡æ¥åˆ†æµã€‚</p>
<p>nginx ä¹Ÿå¯ä»¥å®ç°ç®€å•çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</p>
<p>å‡è®¾è¿™æ ·ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼šå°†åº”ç”¨éƒ¨ç½²åœ¨ 192.168.1.11:80ã€192.168.1.12:80ã€192.168.1.13:80 ä¸‰å° linux ç¯å¢ƒçš„æœåŠ¡å™¨ä¸Šã€‚ç½‘ç«™åŸŸåå« <a href="http://www.helloworld.com" target="_blank" rel="noopener">www.helloworld.com</a>ï¼Œå…¬ç½‘ IP ä¸º 192.168.1.11ã€‚åœ¨å…¬ç½‘ IP æ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½² nginxï¼Œå¯¹æ‰€æœ‰è¯·æ±‚åšè´Ÿè½½å‡è¡¡å¤„ç†ã€‚</p>
<p>nginx.conf é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">     <span class="comment">#è®¾å®šmimeç±»å‹,ç±»å‹ç”±mime.typeæ–‡ä»¶å®šä¹‰</span></span><br><span class="line">    <span class="attribute">include</span>       /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line">    <span class="comment">#è®¾å®šæ—¥å¿—æ ¼å¼</span></span><br><span class="line">    <span class="attribute">access_log</span>    /var/log/nginx/access.log;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#è®¾å®šè´Ÿè½½å‡è¡¡çš„æœåŠ¡å™¨åˆ—è¡¨</span></span><br><span class="line">    <span class="attribute">upstream</span> load_balance_server &#123;</span><br><span class="line">        <span class="comment">#weigthå‚æ•°è¡¨ç¤ºæƒå€¼ï¼Œæƒå€¼è¶Šé«˜è¢«åˆ†é…åˆ°çš„å‡ ç‡è¶Šå¤§</span></span><br><span class="line">        <span class="attribute">server</span> <span class="number">192.168.1.11:80</span>   weight=<span class="number">5</span>;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">192.168.1.12:80</span>   weight=<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">192.168.1.13:80</span>   weight=<span class="number">6</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">#HTTPæœåŠ¡å™¨</span></span><br><span class="line">   <span class="section">server</span> &#123;</span><br><span class="line">        <span class="comment">#ä¾¦å¬80ç«¯å£</span></span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#å®šä¹‰ä½¿ç”¨www.xx.comè®¿é—®</span></span><br><span class="line">        <span class="attribute">server_name</span>  www.helloworld.com;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè´Ÿè½½å‡è¡¡è¯·æ±‚</span></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>        /root;                 <span class="comment">#å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½®</span></span><br><span class="line">            <span class="attribute">index</span>       index.html index.htm;  <span class="comment">#å®šä¹‰é¦–é¡µç´¢å¼•æ–‡ä»¶çš„åç§°</span></span><br><span class="line">            <span class="attribute">proxy_pass</span>  http://load_balance_server ;<span class="comment">#è¯·æ±‚è½¬å‘load_balance_server å®šä¹‰çš„æœåŠ¡å™¨åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">#ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®(å¯é€‰æ‹©æ€§é…ç½®)</span></span><br><span class="line">            <span class="comment">#proxy_redirect off;</span></span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="comment">#åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP</span></span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="attribute">proxy_connect_timeout</span> <span class="number">90</span>;          <span class="comment">#nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)</span></span><br><span class="line">            <span class="attribute">proxy_send_timeout</span> <span class="number">90</span>;             <span class="comment">#åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)</span></span><br><span class="line">            <span class="attribute">proxy_read_timeout</span> <span class="number">90</span>;             <span class="comment">#è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)</span></span><br><span class="line">            <span class="attribute">proxy_buffer_size</span> <span class="number">4k</span>;              <span class="comment">#è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°</span></span><br><span class="line">            <span class="attribute">proxy_buffers</span> <span class="number">4</span> <span class="number">32k</span>;               <span class="comment">#proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è¯ï¼Œè¿™æ ·è®¾ç½®</span></span><br><span class="line">            <span class="attribute">proxy_busy_buffers_size</span> <span class="number">64k</span>;       <span class="comment">#é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰</span></span><br><span class="line">            <span class="attribute">proxy_temp_file_write_size</span> <span class="number">64k</span>;    <span class="comment">#è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ </span></span><br><span class="line"></span><br><span class="line">            <span class="attribute">client_max_body_size</span> <span class="number">10m</span>;          <span class="comment">#å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°</span></span><br><span class="line">            <span class="attribute">client_body_buffer_size</span> <span class="number">128k</span>;      <span class="comment">#ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç½‘ç«™æœ‰å¤šä¸ª-webapp-çš„é…ç½®"><a class="markdownIt-Anchor" href="#ç½‘ç«™æœ‰å¤šä¸ª-webapp-çš„é…ç½®"></a> ç½‘ç«™æœ‰å¤šä¸ª webapp çš„é…ç½®</h3>
<p>å½“ä¸€ä¸ªç½‘ç«™åŠŸèƒ½è¶Šæ¥è¶Šä¸°å¯Œæ—¶ï¼Œå¾€å¾€éœ€è¦å°†ä¸€äº›åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹çš„æ¨¡å—å‰¥ç¦»å‡ºæ¥ï¼Œç‹¬ç«‹ç»´æŠ¤ã€‚è¿™æ ·çš„è¯ï¼Œé€šå¸¸ï¼Œä¼šæœ‰å¤šä¸ª webappã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚ <a href="http://www.helloworld.com" target="_blank" rel="noopener">www.helloworld.com</a> ç«™ç‚¹æœ‰å¥½å‡ ä¸ª webappï¼Œfinanceï¼ˆé‡‘èï¼‰ã€productï¼ˆäº§å“ï¼‰ã€adminï¼ˆç”¨æˆ·ä¸­å¿ƒï¼‰ã€‚è®¿é—®è¿™äº›åº”ç”¨çš„æ–¹å¼é€šè¿‡ä¸Šä¸‹æ–‡(context)æ¥è¿›è¡ŒåŒºåˆ†:</p>
<p><a href="http://www.helloworld.com/finance/" target="_blank" rel="noopener">www.helloworld.com/finance/</a></p>
<p><a href="http://www.helloworld.com/product/" target="_blank" rel="noopener">www.helloworld.com/product/</a></p>
<p><a href="http://www.helloworld.com/admin/" target="_blank" rel="noopener">www.helloworld.com/admin/</a></p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œhttp çš„é»˜è®¤ç«¯å£å·æ˜¯ 80ï¼Œå¦‚æœåœ¨ä¸€å°æœåŠ¡å™¨ä¸ŠåŒæ—¶å¯åŠ¨è¿™ 3 ä¸ª webapp åº”ç”¨ï¼Œéƒ½ç”¨ 80 ç«¯å£ï¼Œè‚¯å®šæ˜¯ä¸æˆçš„ã€‚æ‰€ä»¥ï¼Œè¿™ä¸‰ä¸ªåº”ç”¨éœ€è¦åˆ†åˆ«ç»‘å®šä¸åŒçš„ç«¯å£å·ã€‚</p>
<p>é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œç”¨æˆ·åœ¨å®é™…è®¿é—® <a href="http://www.helloworld.com" target="_blank" rel="noopener">www.helloworld.com</a> ç«™ç‚¹æ—¶ï¼Œè®¿é—®ä¸åŒ webappï¼Œæ€»ä¸ä¼šè¿˜å¸¦ç€å¯¹åº”çš„ç«¯å£å·å»è®¿é—®å§ã€‚æ‰€ä»¥ï¼Œä½ å†æ¬¡éœ€è¦ç”¨åˆ°åå‘ä»£ç†æ¥åšå¤„ç†ã€‚</p>
<p>é…ç½®ä¹Ÿä¸éš¾ï¼Œæ¥çœ‹çœ‹æ€ä¹ˆåšå§ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">	<span class="comment">#æ­¤å¤„çœç•¥ä¸€äº›åŸºæœ¬é…ç½®</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">upstream</span> product_server&#123;</span><br><span class="line">		<span class="attribute">server</span> www.helloworld.com:<span class="number">8081</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="attribute">upstream</span> admin_server&#123;</span><br><span class="line">		<span class="attribute">server</span> www.helloworld.com:<span class="number">8082</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="attribute">upstream</span> finance_server&#123;</span><br><span class="line">		<span class="attribute">server</span> www.helloworld.com:<span class="number">8083</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="section">server</span> &#123;</span><br><span class="line">		<span class="comment">#æ­¤å¤„çœç•¥ä¸€äº›åŸºæœ¬é…ç½®</span></span><br><span class="line">		<span class="comment">#é»˜è®¤æŒ‡å‘productçš„server</span></span><br><span class="line">		<span class="attribute">location</span> / &#123;</span><br><span class="line">			<span class="attribute">proxy_pass</span> http://product_server;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="attribute">location</span> /product/&#123;</span><br><span class="line">			<span class="attribute">proxy_pass</span> http://product_server;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="attribute">location</span> /admin/ &#123;</span><br><span class="line">			<span class="attribute">proxy_pass</span> http://admin_server;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="attribute">location</span> /finance/ &#123;</span><br><span class="line">			<span class="attribute">proxy_pass</span> http://finance_server;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="https-åå‘ä»£ç†é…ç½®"><a class="markdownIt-Anchor" href="#https-åå‘ä»£ç†é…ç½®"></a> https åå‘ä»£ç†é…ç½®</h3>
<p>ä¸€äº›å¯¹å®‰å…¨æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„ç«™ç‚¹ï¼Œå¯èƒ½ä¼šä½¿ç”¨ HTTPSï¼ˆä¸€ç§ä½¿ç”¨ ssl é€šä¿¡æ ‡å‡†çš„å®‰å…¨ HTTP åè®®ï¼‰ã€‚</p>
<p>è¿™é‡Œä¸ç§‘æ™® HTTP åè®®å’Œ SSL æ ‡å‡†ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ nginx é…ç½® https éœ€è¦çŸ¥é“å‡ ç‚¹ï¼š</p>
<ul>
<li>HTTPS çš„å›ºå®šç«¯å£å·æ˜¯ 443ï¼Œä¸åŒäº HTTP çš„ 80 ç«¯å£</li>
<li>SSL æ ‡å‡†éœ€è¦å¼•å…¥å®‰å…¨è¯ä¹¦ï¼Œæ‰€ä»¥åœ¨ nginx.conf ä¸­ä½ éœ€è¦æŒ‡å®šè¯ä¹¦å’Œå®ƒå¯¹åº”çš„ key</li>
</ul>
<p>å…¶ä»–å’Œ http åå‘ä»£ç†åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯åœ¨ <code>Server</code> éƒ¨åˆ†é…ç½®æœ‰äº›ä¸åŒã€‚</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment">#HTTPæœåŠ¡å™¨</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="comment">#ç›‘å¬443ç«¯å£ã€‚443ä¸ºçŸ¥åç«¯å£å·ï¼Œä¸»è¦ç”¨äºHTTPSåè®®</span></span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">443</span> ssl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å®šä¹‰ä½¿ç”¨www.xx.comè®¿é—®</span></span><br><span class="line">    <span class="attribute">server_name</span>  www.helloworld.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#sslè¯ä¹¦æ–‡ä»¶ä½ç½®(å¸¸è§è¯ä¹¦æ–‡ä»¶æ ¼å¼ä¸ºï¼šcrt/pem)</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span>      cert.pem;</span><br><span class="line">    <span class="comment">#sslè¯ä¹¦keyä½ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span>  cert.key;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#sslé…ç½®å‚æ•°ï¼ˆé€‰æ‹©æ€§é…ç½®ï¼‰</span></span><br><span class="line">    <span class="attribute">ssl_session_cache</span>    shared:SSL:<span class="number">1m</span>;</span><br><span class="line">    <span class="attribute">ssl_session_timeout</span>  <span class="number">5m</span>;</span><br><span class="line">    <span class="comment">#æ•°å­—ç­¾åï¼Œæ­¤å¤„ä½¿ç”¨MD5</span></span><br><span class="line">    <span class="attribute">ssl_ciphers</span>  HIGH:!aNULL:!MD5;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span>  <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   /root;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é™æ€ç«™ç‚¹é…ç½®"><a class="markdownIt-Anchor" href="#é™æ€ç«™ç‚¹é…ç½®"></a> é™æ€ç«™ç‚¹é…ç½®</h3>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®é™æ€ç«™ç‚¹(å³ html æ–‡ä»¶å’Œä¸€å †é™æ€èµ„æº)ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼šå¦‚æœæ‰€æœ‰çš„é™æ€èµ„æºéƒ½æ”¾åœ¨äº† <code>/app/dist</code> ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ <code>nginx.conf</code> ä¸­æŒ‡å®šé¦–é¡µä»¥åŠè¿™ä¸ªç«™ç‚¹çš„ host å³å¯ã€‚</p>
<p>é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">	<span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">gzip_types</span> text/plain application/x-javascript text/css application/xml text/javascript application/javascript image/jpeg image/gif image/png;</span><br><span class="line">    <span class="attribute">gzip_vary</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">		<span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">		<span class="attribute">server_name</span>  static.zp.cn;</span><br><span class="line"></span><br><span class="line">		<span class="attribute">location</span> / &#123;</span><br><span class="line">			<span class="attribute">root</span> /app/dist;</span><br><span class="line">			<span class="attribute">index</span> index.html;</span><br><span class="line">			<span class="comment">#è½¬å‘ä»»ä½•è¯·æ±‚åˆ° index.html</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæ·»åŠ  HOSTï¼š</p>
<p>127.0.0.1 <a href="http://static.zp.cn" target="_blank" rel="noopener">static.zp.cn</a></p>
<p>æ­¤æ—¶ï¼Œåœ¨æœ¬åœ°æµè§ˆå™¨è®¿é—® <a href="http://static.zp.cn" target="_blank" rel="noopener">static.zp.cn</a> ï¼Œå°±å¯ä»¥è®¿é—®é™æ€ç«™ç‚¹äº†ã€‚</p>
<h3 id="æ­å»ºæ–‡ä»¶æœåŠ¡å™¨"><a class="markdownIt-Anchor" href="#æ­å»ºæ–‡ä»¶æœåŠ¡å™¨"></a> æ­å»ºæ–‡ä»¶æœåŠ¡å™¨</h3>
<p>æœ‰æ—¶å€™ï¼Œå›¢é˜Ÿéœ€è¦å½’æ¡£ä¸€äº›æ•°æ®æˆ–èµ„æ–™ï¼Œé‚£ä¹ˆæ–‡ä»¶æœåŠ¡å™¨å¿…ä¸å¯å°‘ã€‚ä½¿ç”¨ Nginx å¯ä»¥éå¸¸å¿«é€Ÿä¾¿æ·çš„æ­å»ºä¸€ä¸ªç®€æ˜“çš„æ–‡ä»¶æœåŠ¡ã€‚</p>
<p>Nginx ä¸­çš„é…ç½®è¦ç‚¹ï¼š</p>
<ul>
<li>å°† autoindex å¼€å¯å¯ä»¥æ˜¾ç¤ºç›®å½•ï¼Œé»˜è®¤ä¸å¼€å¯ã€‚</li>
<li>å°† autoindex_exact_size å¼€å¯å¯ä»¥æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ã€‚</li>
<li>å°† autoindex_localtime å¼€å¯å¯ä»¥æ˜¾ç¤ºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€‚</li>
<li>root ç”¨æ¥è®¾ç½®å¼€æ”¾ä¸ºæ–‡ä»¶æœåŠ¡çš„æ ¹è·¯å¾„ã€‚</li>
<li>charset è®¾ç½®ä¸º <code>charset utf-8,gbk;</code>ï¼Œå¯ä»¥é¿å…ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ˆwindows æœåŠ¡å™¨ä¸‹è®¾ç½®åï¼Œä¾ç„¶ä¹±ç ï¼Œæœ¬äººæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼‰ã€‚</li>
</ul>
<p>ä¸€ä¸ªæœ€ç®€åŒ–çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">autoindex</span> <span class="literal">on</span>;<span class="comment"># æ˜¾ç¤ºç›®å½•</span></span><br><span class="line"><span class="attribute">autoindex_exact_size</span> <span class="literal">on</span>;<span class="comment"># æ˜¾ç¤ºæ–‡ä»¶å¤§å°</span></span><br><span class="line"><span class="attribute">autoindex_localtime</span> <span class="literal">on</span>;<span class="comment"># æ˜¾ç¤ºæ–‡ä»¶æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">charset</span>      utf-<span class="number">8</span>,gbk; <span class="comment"># windows æœåŠ¡å™¨ä¸‹è®¾ç½®åï¼Œä¾ç„¶ä¹±ç ï¼Œæš‚æ—¶æ— è§£</span></span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">9050</span> default_server;</span><br><span class="line">    <span class="attribute">listen</span>       [::]:<span class="number">9050</span> default_server;</span><br><span class="line">    <span class="attribute">server_name</span>  _;</span><br><span class="line">    <span class="attribute">root</span>         /share/fs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è·¨åŸŸè§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#è·¨åŸŸè§£å†³æ–¹æ¡ˆ"></a> è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h3>
<p>web é¢†åŸŸå¼€å‘ä¸­ï¼Œç»å¸¸é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œå‰ç«¯å’Œåç«¯åˆ†åˆ«æ˜¯ç‹¬ç«‹çš„ web åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ï¼šåç«¯æ˜¯ Java ç¨‹åºï¼Œå‰ç«¯æ˜¯ React æˆ– Vue åº”ç”¨ã€‚</p>
<p>å„è‡ªç‹¬ç«‹çš„ web app åœ¨äº’ç›¸è®¿é—®æ—¶ï¼ŒåŠ¿å¿…å­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚è§£å†³è·¨åŸŸé—®é¢˜ä¸€èˆ¬æœ‰ä¸¤ç§æ€è·¯ï¼š</p>
<ol>
<li><strong>CORS</strong></li>
</ol>
<p>åœ¨åç«¯æœåŠ¡å™¨è®¾ç½® HTTP å“åº”å¤´ï¼ŒæŠŠä½ éœ€è¦è¿è¡Œè®¿é—®çš„åŸŸååŠ å…¥åŠ å…¥ <code>Access-Control-Allow-Origin</code> ä¸­ã€‚</p>
<ol start="2">
<li><strong>jsonp</strong></li>
</ol>
<p>æŠŠåç«¯æ ¹æ®è¯·æ±‚ï¼Œæ„é€  json æ•°æ®ï¼Œå¹¶è¿”å›ï¼Œå‰ç«¯ç”¨ jsonp è·¨åŸŸã€‚</p>
<p>è¿™ä¸¤ç§æ€è·¯ï¼Œæœ¬æ–‡ä¸å±•å¼€è®¨è®ºã€‚</p>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œnginx æ ¹æ®ç¬¬ä¸€ç§æ€è·¯ï¼Œä¹Ÿæä¾›äº†ä¸€ç§è§£å†³è·¨åŸŸçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä¸¾ä¾‹ï¼š<a href="http://www.helloworld.com" target="_blank" rel="noopener">www.helloworld.com</a> ç½‘ç«™æ˜¯ç”±ä¸€ä¸ªå‰ç«¯ app ï¼Œä¸€ä¸ªåç«¯ app ç»„æˆçš„ã€‚å‰ç«¯ç«¯å£å·ä¸º 9000ï¼Œ åç«¯ç«¯å£å·ä¸º 8080ã€‚</p>
<p>å‰ç«¯å’Œåç«¯å¦‚æœä½¿ç”¨ http è¿›è¡Œäº¤äº’æ—¶ï¼Œè¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œå› ä¸ºå­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚æ¥çœ‹çœ‹ï¼Œnginx æ˜¯æ€ä¹ˆè§£å†³çš„å§ï¼š</p>
<p>é¦–å…ˆï¼Œåœ¨ enable-cors.conf æ–‡ä»¶ä¸­è®¾ç½® cors ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># allow origin list</span></span><br><span class="line"><span class="attribute">set</span> <span class="variable">$ACAO</span> <span class="string">'*'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># set single origin</span></span><br><span class="line"><span class="attribute">if</span> (<span class="variable">$http_origin</span> <span class="regexp">~* (www.helloworld.com)$)</span> &#123;</span><br><span class="line">  <span class="attribute">set</span> <span class="variable">$ACAO</span> <span class="variable">$http_origin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">if</span> (<span class="variable">$cors</span> = <span class="string">"trueget"</span>) &#123;</span><br><span class="line">	<span class="attribute">add_header</span> <span class="string">'Access-Control-Allow-Origin'</span> <span class="string">"<span class="variable">$http_origin</span>"</span>;</span><br><span class="line">	<span class="attribute">add_header</span> <span class="string">'Access-Control-Allow-Credentials'</span> <span class="string">'true'</span>;</span><br><span class="line">	<span class="attribute">add_header</span> <span class="string">'Access-Control-Allow-Methods'</span> <span class="string">'GET, POST, OPTIONS'</span>;</span><br><span class="line">	<span class="attribute">add_header</span> <span class="string">'Access-Control-Allow-Headers'</span> <span class="string">'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">'OPTIONS'</span>) &#123;</span><br><span class="line">  <span class="attribute">set</span> <span class="variable">$cors</span> <span class="string">"<span class="variable">$&#123;cors&#125;</span>options"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">'GET'</span>) &#123;</span><br><span class="line">  <span class="attribute">set</span> <span class="variable">$cors</span> <span class="string">"<span class="variable">$&#123;cors&#125;</span>get"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">if</span> (<span class="variable">$request_method</span> = <span class="string">'POST'</span>) &#123;</span><br><span class="line">  <span class="attribute">set</span> <span class="variable">$cors</span> <span class="string">"<span class="variable">$&#123;cors&#125;</span>post"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„æœåŠ¡å™¨ä¸­ <code>include enable-cors.conf</code> æ¥å¼•å…¥è·¨åŸŸé…ç½®ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ----------------------------------------------------</span></span><br><span class="line"><span class="comment"># æ­¤æ–‡ä»¶ä¸ºé¡¹ç›® nginx é…ç½®ç‰‡æ®µ</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç›´æ¥åœ¨ nginx config ä¸­ includeï¼ˆæ¨èï¼‰</span></span><br><span class="line"><span class="comment"># æˆ–è€… copy åˆ°ç°æœ‰ nginx ä¸­ï¼Œè‡ªè¡Œé…ç½®</span></span><br><span class="line"><span class="comment"># www.helloworld.com åŸŸåéœ€é…åˆ dns hosts è¿›è¡Œé…ç½®</span></span><br><span class="line"><span class="comment"># å…¶ä¸­ï¼Œapi å¼€å¯äº† corsï¼Œéœ€é…åˆæœ¬ç›®å½•ä¸‹å¦ä¸€ä»½é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># ----------------------------------------------------</span></span><br><span class="line"><span class="attribute">upstream</span> front_server&#123;</span><br><span class="line">  <span class="attribute">server</span> www.helloworld.com:<span class="number">9000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">upstream</span> api_server&#123;</span><br><span class="line">  <span class="attribute">server</span> www.helloworld.com:<span class="number">8080</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">  <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">  <span class="attribute">server_name</span>  www.helloworld.com;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">location</span> <span class="regexp">~ ^/api/</span> &#123;</span><br><span class="line">    <span class="attribute">include</span> enable-cors.conf;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://api_server;</span><br><span class="line">    <span class="attribute">rewrite</span> <span class="string">"^/api/(.*)$"</span> /<span class="variable">$1</span> <span class="literal">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">location</span> <span class="regexp">~ ^/</span> &#123;</span><br><span class="line">    <span class="attribute">proxy_pass</span> http://front_server;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ°æ­¤ï¼Œå°±å®Œæˆäº†ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="http://tool.oschina.net/apidocs/apidoc?api=nginx-zh" target="_blank" rel="noopener">Nginx çš„ä¸­æ–‡ç»´åŸº</a></li>
</ul>

      
    </div>

    
      


    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/web/" rel="tag"># web</a>
          
            <a href="/blog/tags/load-balance/" rel="tag"># load balance</a>
          
            <a href="/blog/tags/proxy/" rel="tag"># proxy</a>
          
            <a href="/blog/tags/nginx/" rel="tag"># nginx</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2016/07/20/programming/java/javacore/advanced/Javaç¼–ç å’ŒåŠ å¯†/" rel="next" title="Java ç¼–ç å’ŒåŠ å¯†">
                <i class="fa fa-chevron-left"></i> Java ç¼–ç å’ŒåŠ å¯†
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2016/10/10/tools/regex/" rel="prev" title="æ­£åˆ™è¡¨è¾¾å¼">
                æ­£åˆ™è¡¨è¾¾å¼ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/blog/images/avatar.gif" alt="Zhang Peng">
            
              <p class="site-author-name" itemprop="name">Zhang Peng</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/blog/archives/">
                
                    <span class="site-state-item-count">332</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/blog/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">32</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/blog/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">138</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/blog/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/dunwu" title="GitHub &rarr; https://github.com/dunwu" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:forbreak@163.com" title="E-Mail &rarr; mailto:forbreak@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#nginx-æç®€æ•™ç¨‹"><span class="nav-text"> Nginx æç®€æ•™ç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¦‚è¿°"><span class="nav-text"> æ¦‚è¿°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®‰è£…"><span class="nav-text"> å®‰è£…</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#windows-å®‰è£…"><span class="nav-text"> Windows å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux-å®‰è£…"><span class="nav-text"> Linux å®‰è£…</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#rpm-åŒ…æ–¹å¼æ¨è"><span class="nav-text"> rpm åŒ…æ–¹å¼ï¼ˆæ¨èï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æºç ç¼–è¯‘æ–¹å¼"><span class="nav-text"> æºç ç¼–è¯‘æ–¹å¼</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux-å¼€æœºè‡ªå¯åŠ¨"><span class="nav-text"> Linux å¼€æœºè‡ªå¯åŠ¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#rpm-åŒ…æ–¹å¼"><span class="nav-text"> rpm åŒ…æ–¹å¼</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æºç ç¼–è¯‘æ–¹å¼-2"><span class="nav-text"> æºç ç¼–è¯‘æ–¹å¼</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä½¿ç”¨"><span class="nav-text"> ä½¿ç”¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nginx-é…ç½®å®æˆ˜"><span class="nav-text"> nginx é…ç½®å®æˆ˜</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#http-åå‘ä»£ç†é…ç½®"><span class="nav-text"> http åå‘ä»£ç†é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è´Ÿè½½å‡è¡¡é…ç½®"><span class="nav-text"> è´Ÿè½½å‡è¡¡é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç½‘ç«™æœ‰å¤šä¸ª-webapp-çš„é…ç½®"><span class="nav-text"> ç½‘ç«™æœ‰å¤šä¸ª webapp çš„é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#https-åå‘ä»£ç†é…ç½®"><span class="nav-text"> https åå‘ä»£ç†é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é™æ€ç«™ç‚¹é…ç½®"><span class="nav-text"> é™æ€ç«™ç‚¹é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ­å»ºæ–‡ä»¶æœåŠ¡å™¨"><span class="nav-text"> æ­å»ºæ–‡ä»¶æœåŠ¡å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è·¨åŸŸè§£å†³æ–¹æ¡ˆ"><span class="nav-text"> è·¨åŸŸè§£å†³æ–¹æ¡ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‚è€ƒèµ„æ–™"><span class="nav-text"> å‚è€ƒèµ„æ–™</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 â€“ <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-paper-plane"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Peng</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="ç«™ç‚¹æ€»å­—æ•°">2.1m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">31:25</span>
  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
      
    
  
  <script color="107,97,95" opacity="0.5" zindex="-1" count="99" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1.0.0/canvas-nest.min.js"></script>











  



  
  <script src="/blog/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-reading-progress@1/reading_progress.min.js"></script>


  


  <script src="/blog/js/src/utils.js?v=7.0.1"></script>

  <script src="/blog/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/blog/js/src/schemes/muse.js?v=7.0.1"></script>



  
  <script src="/blog/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/blog/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/blog/js/src/bootstrap.js?v=7.0.1"></script>


  
  


  


  




  

  

  

  

  

  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1/bookmark.min.js"></script>
  <script>
  
    bookmark.scrollToMark('auto', "#æ›´å¤š");
  
  </script>


  

</body>
</html>
